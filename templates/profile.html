<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Page</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


    <script>
        function getHashParams() {
            var hashParams = {};
            var e, r = /([^&;=]+)=?([^&;]*)/g, q = window.location.hash.substring(1);
            while ( e = r.exec(q)) {
               hashParams[e[1]] = decodeURIComponent(e[2]);
            }
            return hashParams;
        }

        window.onload = function fetchUserInfo() {
                var params = getHashParams();
                var idToken = params['id_token'];
                const userInfoEndpoint = 'https://demo1234523.auth.us-east-1.amazoncognito.com/oauth2/userInfo';

                fetch(userInfoEndpoint, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${idToken}`
                    }
                })
                .then(response => response.json())
                .then(data => {
                    console.log('User Info:', data);
                    displayUserInfo(data);
                })
                .catch(error => console.error('Error fetching user info:', error));
            }

            function displayUserInfo(data) {
                // Logging the data to the console instead of displaying on the page
                console.log('Username:', data.username);
                console.log('Email:', data.email);
            }





    </script>
<style>
    body, html {
        margin: 0;
        padding: 0;
        font-family: 'Inter', sans-serif;
        background: white;
    }

    .header {
        display: flex;
        justify-content: center; /* Centering the content */
        align-items: center;
        background: #003865;
        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
        padding: 1rem;
        min-height: 30px;
    }

    .header-button {
        background: #003865; /* Same as header background */
        color: white;
        border: 2px solid white; /* White border */
        padding: 10px 20px;
        border-radius: 13px;
        text-decoration: none; /* Remove underline from link */
        font-weight: 700;
        margin-right: auto; /* Push other content to the right */
    }

    .search-container {
        display: flex;
        align-items: center;
        background: white;
        border-radius: 13px;
        padding: 0 10px;
        margin-right: 35%;
        width: 30%;
    }

    .profile-section {
        text-align: center; /* Center the profile image and name */
    }

    .profile-name {
        color: black;
        font-size: 1.5rem;
        margin-top: 0.5rem; /* Space between image and name */
    }

    #search-query {
        border: none;
        outline: none;
        padding: 10px;
        font-size: 1rem;
        border-radius: 13px 0 0 13px;
        flex-grow: 1;
    }

    #search-icon {
        cursor: pointer;
        color: #003865;
        padding: 10px;
        border-radius: 0 13px 13px 0;
        margin-left: -10px;
    }

    .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
    }

    .profile-image {
        width: 141px;
        height: 139px;
        border-radius: 50%;
    }

    .card {
        background: white;
        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
        border-radius: 10px;
        padding: 20px;
        margin: 10px 0;
        width: 90%; /* Adjust as needed */
    }

    .card-header {
        border-radius: 5px; /* Slightly rounded corners for each box */
        background: #003865;
        color: white;
        padding: 10px;
    }

    .card-content {
        display: flex;
        flex-direction: row; /* Arrange the boxes in a row */
        justify-content: space-around; /* Space out the boxes evenly */
        padding: 20px; /* Padding around the content */
        background: #f6f6f6; /* Light grey background for the card content area */
        border-radius: 10px; /* Rounded corners for the card content area */
    }
    
    .userinfo, .budget, .health-target {
        background: white; /* White background for each box */
        border: 1px solid #ccc; /* Light grey border for each box */
        padding: 10px; /* Padding inside each box */
        border-radius: 5px; /* Slightly rounded corners for each box */
        flex: 1; /* Allow the boxes to grow and take up equal space */
        margin: 0 10px; /* Add some margin between the boxes */
    }
    
    .userinfo p, .budget p, .health-target p {
        margin: 0; /* Remove default paragraph margins */
        padding: 5px 0; /* Spacing above and below text lines */
    }
    
    /* Media query for responsiveness */
    @media (max-width: 768px) {
        .card-content {
            flex-direction: column; /* Stack the boxes on top of each other on smaller screens */
        }
    
        .userinfo, .budget, .health-target {
            margin: 10px 0; /* Add some margin between the boxes on smaller screens */
        }
    }

    .footer {
        background: #003865;
        color: white;
        /* padding: 0 0; */
        text-align: center;
    }

    .footer p{
        font-size: 0.8rem;
        margin-top: 1rem;
        /* border-top: 1px solid #ffffff; */
        padding-top: 1rem;
        padding-bottom: 1rem;
    }
</style>
</head>
<body>
    <div class="header">
        <a href="/" class="header-button">DINING CHOICES</a>
        <div class="search-container">
            <input type="text" id="search-query" placeholder="Search..." />
            <i id="search-icon" class="fas fa-search" onclick="search()"></i>
        </div>
    </div>

    <div class="container">
        <div class="profile-section">
            <img class="profile-image" src="https://business.appstate.edu/sites/default/files/styles/asu_news_full/public/asu_news/student-profile-javon-nathaniel.jpg?itok=-KyYkUKf" />
            <div class="profile-name">Jack</div>
        </div>

        <!-- Your cards and other content... -->
        <div class="card">
            <div class="card-header">User info</div>
            <div class="card-content">
                <div class="userinfo">
                    {% for name, value in user_info.items() %}
                    <p>{{ name }}: {{ value }}</p>
                    {% endfor %}
                </div>
            </div>
            
            <div class="card-content">
                <div class="budget">
                    <!-- Budget Messages Here -->
                    <p>Message line 1</p>
                    <p>Message line 2</p>
                    <!-- More budget messages -->
                </div>
            
                <div class="health-target">
                    <!-- Health Target Messages Here -->
                    <p>Message line 1</p>
                    <p>Message line 2</p>
                    <!-- More health target messages -->
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">Favorites</div>
            <div class="card-content">
                <!-- Content goes here -->
            </div>
        </div>
    </div>

    <div class="footer">
        <!-- Footer content... -->
        <p>&copy; 2023 Morningside Dining Choices. All rights reserved.</p>
    </div>
</body>
</html>
